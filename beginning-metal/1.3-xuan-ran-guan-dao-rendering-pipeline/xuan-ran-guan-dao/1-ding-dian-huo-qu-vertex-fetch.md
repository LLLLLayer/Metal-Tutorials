# 1 - 顶点获取(Vertex Fetch)

此阶段的名称在不同的图形应用程序编程接口(API)中有所不同。例如，DirectX 将其称为输入汇编器(Input Assembler)。

要开始渲染 3D 内容，你首先需要一个场景。场景由具有顶点网格的模型组成。最简单的模型之一是立方体，它有六个面(12 个三角形)。正如你在上一章中看到的，你使用顶点描述符(Vertex descriptor)来定义顶点的读取方式及其属性 - 例如位置、纹理坐标、法线和颜色。你可以选择不使用顶点描述符，而只在 `MTLBuffer` 中发送一个顶点数组，但是，如果你决定不使用顶点描述符，则需要提前了解顶点缓冲区(Vertex buffer)的组织方式。

当 GPU 获取顶点缓冲区时，`MTLRenderCommandEncoder` draw 调用会告诉 GPU 缓冲区是否已编入索引。如果缓冲区未编入索引，则 GPU 会假定缓冲区是一个数组，并按顺序一次读取一个元素。

在上一章节，你了解了 Model I/O 如何导入 USD 文件并设置由子网格索引的缓冲区。此索引很重要，因为顶点会被缓存以供重复使用。例如，一个立方体有 12 个三角形和 8 个顶点。如果不进行索引，则必须指定每个三角形的顶点并将 36 个顶点发送到 GPU。这听起来可能不多，但在具有数千个顶点的模型中，顶点缓存很重要。

还有一个用于着色顶点的第二个缓存，以便多次访问的顶点只被着色一次。着色顶点是已经应用颜色的顶点。但这发生在下一阶段。

一个称为调度程序(Scheduler)的特殊硬件单元将顶点及其属性发送到顶点处理阶段。



