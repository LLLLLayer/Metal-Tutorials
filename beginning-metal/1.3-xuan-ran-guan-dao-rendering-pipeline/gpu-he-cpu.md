# GPU 和 CPU

每台计算机都配备了**图形处理单元(GPU)**和**中央处理单元(CPU)**。GPU 是一种专用硬件组件，可以非常快速地处理图像、视频和大量数据。此操作称为吞吐量(Throughput)，以特定时间单位内处理的数据量来衡量。另一方面，CPU 管理资源并负责计算机的操作。虽然 CPU 不能像 GPU 那样处理大量数据，但它可以非常快速地处理许多连续任务(一个接一个)。处理任务所需的时间称为延迟(Latency)。

理想的设置包括低延迟和高吞吐量。低延迟允许队列任务的串行执行，因此 CPU 可以执行命令而不会导致系统变慢或无响应——而高吞吐量允许 GPU 异步渲染视频和游戏而不会使 CPU 停滞。由于 GPU 具有高度并行化的架构，专门用于重复执行相同的任务，并且很少或没有数据传输，因此它可以处理大量数据。

下图展示了CPU和GPU之间的主要区别。

<figure><img src="../../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>

CPU 拥有大型缓存和少量算术逻辑单元(ALU)核心。相比之下，GPU 拥有小型缓存和许多 ALU 核心。CPU 上的低延迟缓存用于快速访问临时资源。GPU 上的 ALU 核心处理计算，而无需将部分结果保存到内存中。

CPU 通常只有几个核心，而 GPU 有数百甚至数千个核心。有了更多核心，GPU 可以将问题拆分成许多更小的部分，每个部分在单独的核心上并行运行，这有助于降低延迟。在处理结束时，部分结果被合并，最终结果返回给 CPU。但核心并不是唯一重要的东西。

除了精简之外，GPU 核心还具有用于处理几何图形的特殊电路，通常称为着色器核心(Shader Cores)。这些着色器核心负责你在屏幕上看到的漂亮颜色。GPU 一次写入整个帧以适应整个渲染窗口；然后它继续尽快渲染下一帧，因此它可以保持可观的帧速率。

<figure><img src="../../.gitbook/assets/image (5).png" alt=""><figcaption></figcaption></figure>

CPU 持续向 GPU 发出命令，确保 GPU 始终有工作要做。但是，在某个时刻，要么 CPU 完成发送命令，要么 GPU 完成处理命令。为了避免停滞，CPU 上的 Metal 会在命令缓冲区中排队多个命令，并按顺序为下一帧发出新命令，而无需等待 GPU 完成前一帧。这意味着无论谁先完成工作，总会有更多的工作要做。

GPU 收到所有命令和资源后，图形管道的 GPU 部分就会启动。要开始使用渲染管道，你需要在新项目中设置这些命令和资源。



